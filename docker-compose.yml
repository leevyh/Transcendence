services:
  django_backend:
    container_name: django_backend
    build: ./srcs/services/django_backend
    expose:
      -  9001
    restart: on-failure

  nginx_frontend:
    container_name: nginx_frontend
    build: ./srcs/services/nginx_frontend
    expose:
      - 9000:80
    volumes:
      - data_frontend:/var/www/ft_transcendence
    depends_on:
      - django_backend
    restart: on-failure

  nginx_proxy:
    container_name: nginx_proxy
    build: ./srcs/services/nginx_proxy
    ports:
      - 8888:80
    depends_on:
      - nginx_frontend
      - django_backend
    restart: on-failure

volumes:
  data_frontend:
    driver: local
    driver_opts:
        o: bind
        type: none
        device: './srcs/README.md'