services:
  nginx:
    container_name: nginx
    build:  ./srcs/services/nginx
    ports:
      -  8001:80
    volumes:
      -  static_volume:/home/app/web/staticfiles
      -  media_volume:/home/app/web/mediafiles
    depends_on:
      -  backend
    restart: on-failure

  backend:
    container_name: backend
    build:  ./srcs/services/backend
    expose:
      -  8000
    volumes:
      -  static_volume:/home/app/web/staticfiles
      -  media_volume:/home/app/web/mediafiles
    restart: on-failure

volumes:
  postgres_data:
  static_volume:
  media_volume: